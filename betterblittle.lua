local a=math.floor;local b=table.concat;local c={}for d=1,16 do c[2^(d-1)]=("0123456789abcdef"):sub(d,d)end;local e={}local f={}local g={}for d=0,1865 do local h,i,j,k,l,m=a(d/6^0)%6,a(d/6^1)%6,a(d/6^2)%6,a(d/6^3)%6,a(d/6^4)%6,a(d/6^5)%6;local n={}n[m]=5;n[l]=4;n[k]=3;n[j]=2;n[i]=1;n[h]=0;local o=n[i]+n[j]*3+n[k]*4+n[l]*20+n[m]*100;if e[o]==nil then local p={}p[h]=1;p[i]=(p[i]or 0)+1;p[j]=(p[j]or 0)+1;p[k]=(p[k]or 0)+1;p[l]=(p[l]or 0)+1;p[m]=(p[m]or 0)+1;local q,r=h,0;local s,t=h,0;for u,v in pairs(p)do if v>t then if v>r then s=q;t=r;q=u;r=v else s=u;t=v end end end;local w=0;if h==q then w=w+1 end;if i==q then w=w+2 end;if j==q then w=w+4 end;if k==q then w=w+8 end;if l==q then w=w+16 end;if m==q then w=w+32 end;q=n[q]+1;s=n[s]+1;local x=bit32.bxor(w,63)if w>x then e[o]=s;f[o]=q;g[o]=string.char(128+x)else e[o]=q;f[o]=s;g[o]=string.char(128+w)end end end;local n={}local y={0,0,0,0,0,0}local function z(h,i,j,k,l,m)y[1]=h;y[2]=i;y[3]=j;y[4]=k;y[5]=l;y[6]=m;n[m]=5;n[l]=4;n[k]=3;n[j]=2;n[i]=1;n[h]=0;local o=n[i]+n[j]*3+n[k]*4+n[l]*20+n[m]*100;local A=e[o]local B=f[o]local C=g[o]return y[A],y[B],C end;local function D(E,F)local G=#E;local H=#E[1]local I=a(H/2)local J=F.setCursorPos;local K=F.blit;local c=c;local z=z;local L={}local M={}local N={}for O=1,a(G/3)do local P=(O-1)*3+1;local Q=E[P]local R=E[P+1]local S=E[P+2]for T=1,I do local U=(T-1)*2+1;local h=Q[U]local i=Q[U+1]local j=R[U]local k=R[U+1]local l=S[U]local m=S[U+1]if h==i and i==j and j==k and k==l and l==m then local V=c[h]L[T]=V;M[T]=V;N[T]="\x80"else local A,B,C=z(h,i,j,k,l,m)L[T]=c[A]M[T]=c[B]N[T]=C end end;J(1,O)local W=b;K(W(N),W(L),W(M))end end;return{drawBuffer=D}